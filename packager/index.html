<!DOCTYPE html>
<html>

<head>
  <meta charset="utf8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      max-width: 480px;
      margin: auto;
      font-family: sans-serif;
    }
    table {
      width: 100%;
      margin-bottom: 10px;
      border-bottom: 1px solid #aaa;
    }
    textarea, input:not([type="radio"]) {
      width: 100%;
    }
    .label {
      width: 150px;
      text-align: center;
      font-weight: bold;
    }
    .desc {
      font-size: smaller;
    }
    summary {
      cursor: pointer;
    }
  </style>
  <title>HTML Packager - forkphorus</title>
</head>

<body>
  <h1>HTML Packager</h1>

  <p>The HTML packager allows you to generate an HTML file for a project, which <a href="guide.html">can be packaged into an EXE file</a> (somewhat) easily.</p>

  <p>While the packager on the homepage creates a link to a website, this packager generates an easily embedable HTML file that functions independently of this website.</p>

  <p>Some icons and all note blocks will not work.</p>

  <table>
    <tr>
      <td class="label">Project Source</td>
      <td>
        <label><input type="radio" name="project-type" value="id" checked> Project ID (scratch.mit.edu/projects/...)</label>
        <label><input type="radio" name="project-type" value="file"> Project File (.sb2, .sb3)</label>
      </td>
    </tr>
    <tr id="project-id-section">
      <td class="label"><label for="project-id-input">Project ID</label></td>
      <td><input type="number" id="project-id-input" value="10128407"></td>
    </tr>
    <tr id="project-file-section" hidden>
      <td class="label"><label for="project-file-input">Project File</label></td>
      <td><input type="file" id="project-file-input" accept=".sb2,.sb3"></td>
    </tr>
    <tr>
      <td colspan="2" class="desc">You can select a project from the scratch.mit.edu website, or choose a project file. Scratch 2 and Scratch 3 projects are supported.</td>
    </tr>
  </table>

  <table>
    <tr>
      <td class="label"><label for="loading-text-input">Loading Text</label></td>
      <td><input id="loading-text-input" type="text" value="forkphorus"></td>
    </tr>
    <tr>
      <td colspan="2" class="desc"><a href="https://user-images.githubusercontent.com/17209175/58766078-219f4d00-8540-11e9-93f0-b04088efb0a8.png" target="_blank">Displayed while the project is loading.</a> Set to empty to display only a loading bar. <span title="Using HTML is definitely a feature and not just me being lazy.">You can use HTML if you're careful.</span></td>
    </tr>
  </table>

  <table>
    <tr>
      <td class="label"><label for="turbo-input">Turbo Mode?</label></td>
      <td><input id="turbo-input" type="checkbox"></td>
    </tr>
    <tr>
      <td colspan="2" class="desc">Enable Turbo Mode? This option will be in effect for the entire project, and cannot be changed while it is running.</td>
    </tr>
  </table>

  <details>
    <!-- wont work in edge/ie but whatever -->
    <summary>Advanced options</summary>
    <table>
      <tr>
        <td class="label"><label for="post-load-script-input">Custom JS</label></td>
        <td><textarea id="post-load-script-input">player.stage.username = '';
player.stage.runtime.framerate = 30;</textarea></td>
      </tr>
      <tr>
        <td colspan="2" class="desc">Custom JavaScript to execute after the project has loaded. The sample script shows how you could change the framerate or username.</td>
      </tr>
    </table>

    <table>
      <tr>
        <td class="label"><label for="custom-style-input">Custom CSS</label></td>
        <td><textarea id="custom-style-input"></textarea></td>
      </tr>
      <tr>
        <td colspan="2" class="desc">Customize the look of the player.</td>
      </tr>
    </table>
  </details>

  <p>
    <button id="package-html">Package to HTML</button>
  </p>

  <section id="loading-section"></section>

  <script src="../lib/details-element-polyfill.js"></script>
  <script src="../lib/jszip.min.js"></script>
  <script src="loader.js"></script>
  <script src="packager.js"></script>

</body>

</html>
